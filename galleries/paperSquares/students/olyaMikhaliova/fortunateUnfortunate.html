<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="charset=utf-8" />
		<link rel="stylesheet" type="text/css" href="../../styles/base.css" />
		<title>Fortunate and Unfortunate</title>
	</head>
	<body>
		<canvas id="myCanvas" width="600" height="600"></canvas>
		<script charset="utf-8" src="../../scripts/paper.js"></script>
		<script charset="utf-8" src="../../scripts/skip.js"></script>
		<script src="perlinNoise.js"></script>
		<script charset="utf-8" type="text/paperscript" canvas="myCanvas">

// create 4 squares
			square1 = new Path.Rectangle(new Point(75,525), new Point(150,600)); 
			square1.fillColor = 'white'; 
			square1.rotation = 0; 
			square1.myRotate = function(r) { 
				this.rotation += r; 
				this.rotate(r); 
			}
			//square1.destination1 = view.bounds.width;

			square2 = new Path.Rectangle(new Point(235,525), new Point(310,600)); 
			square2.fillColor = 'white'; 
			square2.rotation = 0; 
			square2.myRotate = function(r) { 
				this.rotation += r; 
				this.rotate(r); 
			}
			//square2.destination1 = view.bounds.width;

			square3 = new Path.Rectangle(new Point(315,525), new Point(390,600)); 
			square3.fillColor = 'white'; 
			square3.rotation = 0; 
			square3.myRotate = function(r) { 
				this.rotation += r; 
				this.rotate(r); 
			}
			//square3.destination1 = view.bounds.width;

			square4 = new Path.Rectangle(new Point(235,125), new Point(310,200)); 
			square4.fillColor = 'white'; 
			square4.rotation = 0; 
			square4.myRotate = function(r) { 
				this.rotation += r; 
				this.rotate(r); 
			}
			//square4.destination1 = view.bounds.width;

			var background = new Path.Rectangle( view.center, view.bounds.width )
			background.fillColor = 'black'
			background.position = view.center
			project.activeLayer.insertChild( 0, background )

			var durationSeconds = 60
			var running = true

			dirX1 = 1; 
			dirY1 = 1; 
			dirX2 = 1; 
			dirY2 = 1; 
			dirX3 = 1; 
			dirY3 = 1; 
			dirX4 = 1; 
			dirY4 = 1; 
			speed1x = 1.5; 
			speed1y = 0.5; 
			speed2x = 1.5; 
			speed2y = 2; 
			speed3x = 2; 
			speed3y = 2;
			speed4x = 0.5; 
			speed4y = 1; 
			  
			i = 0.3;
			k = 3;
			j = 4;
			h = 2.5;

function onFrame(event) {

	if( event.time > durationSeconds && running === true ){
		
		running = false
		square1.remove()
		square2.remove()
		square3.remove()
		square4.remove()
		background.remove(); 
		var background1 = new Path.Rectangle( view.center, view.bounds.width )
		background1.fillColor = '#333333'
		background1.position = view.center
		document.title = 'Paper finished.'
		console.log( 'Congratulations!' )

	}

	else if( running === true ) {

		document.title = 'Paper at '+ event.time.floor().toPaddedString( 2 ) +' seconds.'

		if ( event.time.isBetween (2, durationSeconds) ){

				if (event.time.isBetween (2,20)) {
					xMin1 = 55;
					xMax1 = 150;
					xMin2 = 170;
					xMax2 = 300;
					xMin3 = 330;
					xMax3 = 560;
					xMin4 = 55;
					xMax4 = 545;

					yMin1 = 490;
					yMax1 = 580;
					yMin2 = 490;
					yMax2 = 580;
					yMin3 = 490;
					yMax3 = 580;
					yMin4 = 75;
					yMax4 = 230;

					i = 0.3;
					k = k + 0.5;
					j = j - 1.5;
					h = h - 0.3;

					if (event.count % 180 == 0) {
						k = k * (-1); 
					}

					if (event.count % 240 == 0) {
						j = j * (-1); 
					}

					if (event.count % 200 == 0) {
						h = h * (-1); 
					}

				} // if ( event.time.isBetween (2,20)) {

			if (event.time.isBetween (21,30)) {
					xMin1 = 55;
					xMax1 = 550;
					xMin2 = 55;
					xMax2 = 550;
					xMin3 = 55;
					xMax3 = 550;
					xMin4 = 55;
					xMax4 = 560;

					yMin1 = 75;
					yMax1 = 230;
					yMin2 = 75;
					yMax2 = 230;
					yMin3 = 75;
					yMax3 = 230;
					yMin4 = 490;
					yMax4 = 600;

					speed1y = 1; 
					speed2y = 1.5; 
					speed3y = 1.3;
					speed4y = 3; 

					speed1x = 0.1;
					speed2x = 0.2;
					speed3x = 0.1;
					speed4y = 3; 

					i = 4;
					k = 0.5;
					j = 0.7;
					h = 1; 

				} // if (event.time.isBetween (21,30)) {

			if (event.time.isBetween (31,50)) {

					xMin1 = 55;
					xMax1 = 150;
					xMin2 = 170;
					xMax2 = 300;
					xMin3 = 330;
					xMax3 = 560;
					xMin4 = 55;
					xMax4 = 545;

					yMin1 = 75;
					yMax1 = 230;
					yMin2 = 75;
					yMax2 = 230;
					yMin3 = 75;
					yMax3 = 230;
					yMin4 = 490;
					yMax4 = 600;

					speed1y = 0.2; 
					speed2y = 0.3; 
					speed3y = 0.1;
					speed4y = 3; 
			
					i = i + 0.5;;

				if (event.time % 3 == 0) {
						i = i * (-1); 
					}

					k = 0.3;
					h = 0.5;
					j = 0.2; 

					speed1x = 0.5;
					speed2x = 0.1;
					speed3x = 0.5;
					speed4y = 4; 

				} // if (event.time.isBetween (31,55)) {
				if ( event.time.isBetween (51,60)) {
					square1.position.x = 75;
					square1.position.y = 235;
					k = 0; 
					speed1x = 0; 
					speed1y = 0; 

					square2.position.x = 235;
					square2.position.y = 235;
					j = 0; 
					speed2x = 0; 
					speed2y = 0; 

					square3.position.x = 315;
					square3.position.y = 235;
					h = 0; 
					speed3x = 0; 
					speed3y = 0; 

					if(square4.position.x > 235 && dirX4 == 1)
					{
						square4.position.x = square4.position.x - 0.1 ; 
					}
					if(square4.position.x < 235 && dirX4 == -1)
					{
						square4.position.x = square4.position.x + 0.1 ; 
					}
					if(square4.position.x == 235)
					{
						square4.position.x = 235 ; 
					}
					
					square4.position.y = 525;
					i = 0; 
					speed4x = 0; 
					speed4y = 0; 

				}

			square1.myRotate(k);
			square2.myRotate(j);
			square3.myRotate(h);
			square4.myRotate(i);

	// we want "x"s of the squares flactuating through all animation
		square1.position.x += speed1x * dirX1; 
			if (square1.position.x < xMin1 || square1.position.x > xMax1) {
				dirX1 = -1 * dirX1;		 
			}	

		square2.position.x += speed2x * dirX2; 	
			if (square2.position.x < xMin2 && dirX2 == -1 ) {
				dirX2 = -1 * dirX2; 
			}
			if (square2.position.x > xMax2 && dirX2 == 1) {
				dirX2 = -1 * dirX2; 
			}
		square3.position.x += speed3x * dirX3; 
			if (square3.position.x < xMin3 && dirX3 == -1 ) {
				dirX3 = -1 * dirX3; 
			}
			if (square3.position.x > xMax3 && dirX3 == 1) {
				dirX3 = -1 * dirX3; 
			}

		square4.position.x += speed4x * dirX4;
			if (square4.position.x < xMin4 || square4.position.x > xMax4) {
				dirX4 = -1 * dirX4; 
			}
		
	// we want "y"s of the squares to be flactuating through all animation 
		square1.position.y += speed1y * dirY1;
			if (square1.position.y > yMax1 && dirY1 == 1){
				dirY1 = dirY1 * (-1); 
			}
			if (square1.position.y < yMin1 && dirY1 == -1){
				dirY1 = dirY1 * (-1); 
			}
		square2.position.y += speed2y * dirY2;
			if (square2.position.y > yMax2 && dirY2 == 1){
				dirY2 = dirY2 * (-1); 
			}
			if (square2.position.y < yMin2 && dirY2 == -1){
				dirY2 = dirY2 * (-1); 
			}
		square3.position.y += speed3y * dirY3;
			if (square3.position.y > yMax3 && dirY3 == 1){
				dirY3 = dirY3 * (-1); 
			}
			if (square3.position.y < yMin3 && dirY3 == -1){
				dirY3 = dirY3 * (-1); 
			}
		square4.position.y += speed4y * dirY4;
			if (square4.position.y > yMax4 && dirY4 == 1){
				dirY4 = dirY4 * (-1); 
			}
			if (square4.position.y < yMin4 && dirY4 == -1){
				dirY4 = dirY4 * (-1); 
			}

		} // if ( event.time.isBetween (2, durationSeconds) ){
			
	} // else if( running === true ) {

} // function onFrame(event){


		</script>
	</body>
</html>